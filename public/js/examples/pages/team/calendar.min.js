/**
 * Admui-iframe v2.1.0 (http://www.admui.com/)
 * Copyright 2015-2019 Admui Team
 * Licensed under the Admui License 1.1 (http://www.admui.com/about/license)
 */
!function(t,o,r){"use strict";o.App.extend({handleFullcalendar:function(){var t,e=[{title:"每天",start:"2016-10-01"},{title:"长事件",start:"2016-10-07",end:"2016-10-10",backgroundColor:r.getColor("cyan",600),borderColor:r.getColor("cyan",600)},{id:999,title:"重复事件",start:"2016-10-09T16:00:00",backgroundColor:r.getColor("red",600),borderColor:r.getColor("red",600)},{title:"会议",start:"2016-10-11",end:"2016-10-13"},{title:"开会",start:"2016-10-12T10:30:00",end:"2016-10-12T12:30:00"},{title:"午餐",start:"2016-10-12T12:00:00"},{title:"开会",start:"2016-10-12T14:30:00"},{title:"休息",start:"2016-10-12T17:30:00"},{title:"活动",start:"2016-10-12T20:00:00"},{title:"生日会",start:"2016-10-13T07:00:00"}],a=r(".site-action").actionBtn().data("actionBtn"),i={header:{left:null,center:"prev,title,next",right:"month,agendaWeek,agendaDay"},defaultDate:"2016-10-12",selectable:!0,selectHelper:!0,select:function(){r("#addNewEvent").modal("show")},editable:!0,eventLimit:!0,windowResize:function(t){var e=r(o).outerWidth(),a=r.extend({},i);a.events=t.calendar.getEventCache(),a.aspectRatio=e<667?.5:1.35,r("#calendar").fullCalendar("destroy").end().fullCalendar(a)},eventClick:function(e,t){var a=e,i=a.backgroundColor?a.backgroundColor:r.getColor("blue",600);r("#editEname").val(e.title),a.start?r("#editStarts").datepicker("update",a.start.d):r("#editStarts").datepicker("update",""),a.end?r("#editEnds").datepicker("update",a.end.d):r("#editEnds").datepicker("update",""),r("#editColor [type=radio]").each(function(){var t=r(this),e=t.data("color").split("|");(e=r.getColor(e[0],e[1]))===i?t.prop("checked",!0):t.prop("checked",!1)}),r('#editColor [value="'+e.backgroundColor+'"]').prop("checked",!0),r("#editNewEvent").modal("show").one("hidden.bs.modal",function(){var t=r("#editColor [type=radio]:checked").data("color").split("|");a.title=r("#editEname").val(),i=r.getColor(t[0],t[1]),a.backgroundColor=t,a.borderColor=t,a.start=new Date(r("#editStarts").data("datepicker").getDate()),a.end=new Date(r("#editEnds").data("datepicker").getDate()),r("#calendar").fullCalendar("updateEvent",e)}),t.stopPropagation()},eventDragStart:function(){a.show()},eventDragStop:function(){a.hide()},events:e,droppable:!0},n=r.extend({},i);n.aspectRatio=.5,t=r(o).outerWidth()<667?n:i,r("#editNewEvent").modal(),r("#calendar").fullCalendar(t)},handleSelective:function(){r('[data-plugin="jquery-selective"]').selective({namespace:"addMember",local:[{id:"uid_1",name:"刘松洋",avatar:"../../../../public/images/portraits/1.jpg"},{id:"uid_2",name:"邓艳红",avatar:"../../../../public/images/portraits/2.jpg"},{id:"uid_3",name:"张润展",avatar:"../../../../public/images/portraits/3.jpg"},{id:"uid_4",name:"李吉琴",avatar:"../../../../public/images/portraits/4.jpg"}],selected:[{id:"uid_1",name:"赵振宁",avatar:"../../../../public/images/portraits/1.jpg"},{id:"uid_2",name:"陈宝荣",avatar:"../../../../public/images/portraits/2.jpg"}],buildFromHtml:!1,tpl:{optionValue:function(t){return t.id},frame:function(){return'<div class="'+this.namespace+'">'+this.options.tpl.items.call(this)+'<div class="'+this.namespace+'-trigger">'+this.options.tpl.triggerButton.call(this)+'<div class="'+this.namespace+'-trigger-dropdown">'+this.options.tpl.list.call(this)+"</div></div></div>"},triggerButton:function(){return'<div class="'+this.namespace+'-trigger-button"><i class="wb-plus"></i></div>'},listItem:function(t){return'<li class="'+this.namespace+'-list-item"><img class="avatar" src="'+t.avatar+'">'+t.name+"</li>"},item:function(t){return'<li class="'+this.namespace+'-item"><img class="avatar" src="'+t.avatar+'" title="'+t.name+'">'+this.options.tpl.itemRemove.call(this)+"</li>"},itemRemove:function(){return'<span class="'+this.namespace+'-remove"><i class="wb-minus-circle"></i></span>'},option:function(t){return'<option value="'+this.options.tpl.optionValue.call(this,t)+'">'+t.name+"</option>"}}})},handleEventList:function(){r("#addNewEventBtn").on("click",function(){r("#addNewEvent").modal("show")}),r(".calendar-list .calendar-event").each(function(){var t=r(this),e=t.data("color").split("-");t.data("event",{title:t.data("title"),stick:t.data("stick"),backgroundColor:r.getColor(e[0],e[1]),borderColor:r.getColor(e[0],e[1])}),t.draggable({zIndex:999,revert:!0,revertDuration:0,helper:function(){return'<a class="fc-day-grid-event fc-event fc-start fc-end" style="background-color:'+r.getColor(e[0],e[1])+";border-color:"+r.getColor(e[0],e[1])+'"><div class="fc-content"><span class="fc-title">'+t.data("title")+"</span></div></a>"}})})},handleListItem:function(){r(".site-action").on("click",function(t){r("#addNewCalendar").modal("show"),t.stopPropagation()}),r(t).on("click","[data-tag=list-delete]",function(){o.top.layer.alert("你想删除这个日历吗?",{icon:4},function(t){o.top.layer.close(t)})})},run:function(){r("#addNewCalendarForm").modal({show:!1}),r("#addNewEvent").modal({show:!1}),r("#editNewEvent").modal({show:!1}),this.handleEventList(),this.handleFullcalendar(),this.handleSelective(),this.handleListItem()}}),r(function(){o.App.run()})}(document,window,jQuery);