/**
 * Admui-iframe v2.1.0 (http://www.admui.com/)
 * Copyright 2015-2019 Admui Team
 * Licensed under the Admui License 1.1 (http://www.admui.com/about/license)
 */
!function(v,p,g){var i,C,x,k,w,S,T,$,I=function(e){var n=e||p,t=C.data("theme"),i=g("#admui-siteStyle",n),s=-1===i.prop("href").indexOf("?v=")?"":".min";$&&"primary"!==$&&(e?i.attr("href","/public/themes/"+t+"/css/skins/"+$+"/site"+s+".css"):setTimeout(function(){i.attr("href","/public/themes/"+t+"/css/skins/"+$+"/index"+s+".css")},100))},y=function(){w.collapse("hide")};g.site=g.site||{},g.site.menu={speed:250,init:function(){var e=x.find(".site-menu");0<(this.$instance=e).length&&this.bind()},bind:function(){var t=this,o=g.site.menubar,l=function(e){return o.folded&&e.is(".has-sub")&&0<e.parent(".site-menu").length};t.$instance.on("mouseenter.site.menu",".site-menu-item",function(){var e,n,t,i,s,a=g(this);l(a)&&(n=(e=a).find(">.site-menu-sub"),t=e.position().top,i=o.$instance.outerHeight(),s=e.find("> a").outerHeight(),n.removeClass("site-menu-sub-up").css("max-height",""),i/2<t?(o.foldAlt&&(t-=s),n.addClass("site-menu-sub-up"),n.css("max-height",t+s)):(o.foldAlt&&(t+=s),n.removeClass("site-menu-sub-up"),n.css("max-height",i-t)),C.addClass("site-menubar-fold-hover")),a.addClass("hover")}).on("mouseleave.site.menu",".site-menu-item",function(){var e=g(this);l(e)&&(e.find(">.site-menu-sub").css("max-height",""),C.removeClass("site-menubar-fold-hover")),e.removeClass("hover")}).on("deactive.site.menu",".site-menu-item.active",function(){g(this).removeClass("active")}).on("active.site.menu",".site-menu-item",function(){g(this).addClass("active")}).on("open.site.menu",".site-menu-item",function(e){var n=g(this);t.expand(n,function(){n.addClass("open")}),e.stopPropagation()}).on("close.site.menu",".site-menu-item.open",function(e){var n=g(this);t.collapse(n,function(){n.removeClass("open")}),e.stopPropagation()}).on("click.site.menu",".site-menu-item > a",function(){var e=g(this).parent();e.is(".has-sub")?e.is(".open")?e.trigger("close.site.menu"):e.trigger("open.site.menu"):(t.$instance.find("li.active").removeClass("active"),e.addClass("active"))}).on("touchend.site.menu","> .site-menu-item > a",function(){var e=g(this).parent(".site-menu-item");o.folded&&e.is(".has-sub")&&0<e.parent(".site-menu").length&&(e.siblings(".hover").removeClass("hover"),e.is(".hover")?e.removeClass("hover"):e.addClass("hover"))}).on("scroll.site.menu",".site-menu-sub",function(e){e.stopPropagation()})},collapse:function(e,n){var t=this;e.children(".site-menu-sub").slideUp(t.speed,function(){n&&n(),t.$instance.trigger("collapsed.site.menu")})},expand:function(e,n){var t=this,i=e.children(".site-menu-sub");e.siblings(".open").trigger("close.site.menu"),i.slideDown(t.speed,function(){n&&n(),t.$instance.trigger("expanded.site.menu")})},refresh:function(){x.find("li.open").trigger("close.site.menu"),x.find("li.active").trigger("deactive.site.menu")}},g.site.menubar={opened:!0,folded:!1,top:!1,foldAlt:!1,$instance:null,init:function(){var t=this,e=k.find(">ul>li.nav-item"),n=g("#admui-navTabs");i.removeClass("css-menubar").addClass("js-menubar"),this.$instance=n,this.tabId=e.find(">a.active").attr("href"),this.folded=C.hasClass("site-menubar-unfold"),e.find(">a.active").parent().is("#admui-navbarSubMenu")&&(this.tabId=e.find("a.dropdown-item.active").attr("href")),0!==n.length&&(C.is(".site-menubar-fold-alt")&&(this.foldAlt=!0),n.on("changed.site.menubar",function(){t.update()}),k.find('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var n=g(e.target).attr("href");t.tabId=n,C.hasClass("site-menubar-fold")?t.hoverscroll.enable(n):C.hasClass("site-menubar-unfold")&&t.mCustomScrollbar.enable()}),this.folded?this.change():this.fold())},change:function(){var e=this,n=Breakpoints.current(),t=n.name;if(n)switch(t){case"lg":this.unfold();break;case"md":case"sm":this.fold();break;case"xs":this.hide()}Breakpoints.on("xs","leave",function(){y(),e.resetNav()})},animate:function(e,n){var t=this.$instance;C.addClass("site-menubar-changing"),e.call(this),t.trigger("changing.site.menubar"),n.call(this),C.removeClass("site-menubar-changing"),t.trigger("changed.site.menubar")},reset:function(){this.opened=!0,this.folded=!1,C.removeClass("site-menubar-hide site-menubar-open site-menubar-fold site-menubar-unfold"),i.removeClass("disable-scrolling")},open:function(){this.opened||(this.reset(),this.animate(function(){C.addClass("site-menubar-open site-menubar-unfold"),this.opened=!0,i.addClass("disable-scrolling")},function(){this.mCustomScrollbar.enable()}))},hide:function(){this.hoverscroll.disable(),this.opened&&(this.reset(),this.animate(function(){i.removeClass("disable-scrolling"),C.addClass("site-menubar-hide site-menubar-unfold"),this.opened=!1},function(){this.mCustomScrollbar.enable()}))},unfold:function(){this.hoverscroll.disable(),this.folded?(this.reset(),this.animate(function(){C.addClass("site-menubar-unfold"),this.folded=!1},function(){this.mCustomScrollbar.enable()})):this.mCustomScrollbar.enable(),this.resetNav()},fold:function(){this.mCustomScrollbar.disable(),this.folded||(this.reset(),this.animate(function(){C.addClass("site-menubar-fold"),this.folded=!0},function(){this.hoverscroll.enable(this.tabId)}))},resetNav:function(){k.responsiveTab("reset")},toggle:function(){var e=Breakpoints.current(),n=this.folded,t=this.opened,i=function(e){n?e.unfold():e.fold()};switch(e.name){case"lg":i(this);break;case"md":case"sm":i(this),this.resetNav();break;case"xs":t?this.hide():this.open()}},update:function(){this.hoverscroll.update()},mCustomScrollbar:{api:null,native:!1,init:function(){g.site.menubar.$instance.find(">.tab-pane").mCustomScrollbar(g.concatCpt("mCustomScrollbar",{theme:"light"}))},enable:function(){!this.native&&this.init()},disable:function(){g.site.menubar.$instance.find(">.tab-pane").mCustomScrollbar("destroy")}},hoverscroll:{api:null,init:function(e){this.api=g.site.menubar.$instance.find(e).asHoverScroll({namespace:"hoverscorll",direction:"vertical",list:".site-menu",item:"> li",exception:".site-menu-sub",fixed:!1,boundary:100,onEnter:function(){},onLeave:function(){}}).data("asHoverScroll")},update:function(){var e=this.api;e&&e.update()},enable:function(e){e!==this.tabId?(this.tabId=e,this.init(e)):this.api.enable()},disable:function(){var e=this.api;e&&e.disable()}}},g.extend(g.site,{frameEvents:function(e){T.next(".page-loading").show(),e.on("load",function(){var e=g.contentFrame.document(),n=g("title",e).text(),t=S.find("li.active>a");T.next(".page-loading").hide(),"加载中..."===t.attr("title")&&t.attr("title",n).text(n),g("title").text(n),g(e).on("click",function(){var e=g('[data-toggle="dropdown"]');Breakpoints.is("xs")&&C.hasClass("site-menubar-open")&&(g.site.menubar.hide(),y()),e.each(function(){var e=g(this);e.next().is(".show")&&e.dropdown("toggle")})}),g("#admui-siteStyle",e).on("load",function(){I(e)})})},run:function(){var e,n,t,i,s,a,o,l,r,d,u,c,m,f,h=this.menu,b=this.menubar;g.contentFrame=g.contentFrame||{},g.extend(g.contentFrame,{global:function(){var e=T.find("iframe.active").attr("name");return v.frames[e]},document:function(){return this.global().document}}),!_.isUndefined(h)&&h.init(),!_.isUndefined(this.contentTabs)&&this.contentTabs.init(),k.responsiveTab({tabContent:"#admui-navTabs",complete:function(e){e.removeClass("is-load")}}),_.isUndefined(b)||(b.init(),Breakpoints.on("change",function(){b.change()}),g(p).on("click",'[data-toggle="menubar"]',function(){return Breakpoints.is("xs")&&b.opened&&y(),b.toggle(),!1}),x.on("changing.site.menubar",function(){var e=g('button[data-toggle="menubar"]');e.toggleClass("hided",!b.opened),e.toggleClass("unfolded",!b.folded)}),w.on("show.bs.collapse",function(){C.addClass("site-navbar-collapsing")}).on("shown.bs.collapse",function(){C.addClass("site-navbar-collapse-show").removeClass("site-navbar-collapsing"),b.resetNav()}).on("hide.bs.collapse",function(){C.addClass("site-navbar-collapsing")}).on("hidden.bs.collapse",function(){C.removeClass("site-navbar-collapse-show").removeClass("site-navbar-collapsing")}),k.find("li:not(.no-menu)").on("click",function(){g(this).is(".dropdown")||Breakpoints.is("xs")&&b.open()})),_.isUndefined(screenfull)||(g("#admui-navbarFullscreen").on("click",function(){screenfull.enabled&&screenfull.toggle()}),screenfull.enabled&&p.addEventListener(screenfull.raw.fullscreenchange,function(){g("#admui-navbarFullscreen > a").toggleClass("active",screenfull.isFullscreen)})),g(p).on("show.bs.dropdown",function(e){var n,t=g(e.target),i=(e.relatedTarget?g(e.relatedTarget):t.find('>[data-toggle="dropdown"]')).data("animation");i&&((n=t.find(">.dropdown-menu")).addClass("animation-"+i),n.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.removeClass("animation-"+i)}))}),s=g.sessionStorage.get(g.configs.get("displaySittings")),_.isNull(s)||($=s.themeColor,e=s.sidebar,n=s.navbar,t=s.menuDisplay,i=s.menuTxtIcon,I(),e&&"site-menubar-light"===e&&x.addClass("site-menubar-light"),n&&g("#admui-siteNavbar").addClass(n),s.navbarInverse||g("#admui-siteNavbar").removeClass("navbar-inverse"),t&&"site-menubar-fold"===t&&(g.site.menubar.fold(),i&&"site-menubar-keep"===i?C.addClass("site-menubar-keep"):C.addClass("site-menubar-fold-alt"))),l=g.configs.get("tabSittings"),r=g.sessionStorage.get(l),d="加载中...",u="",c="frame-0",m=v.location.hash.substring(2),f=g.site.contentTabs,_.forIn(r,function(e,n){switch(a=r[n],n){case"checked":case"tabId":break;case c:u=a.url;break;default:f.buildTab(g.extend(a,{index:n}),"off"),f.enable(S.find(".active"))}}),""===m?(r.checked!==c&&g.sessionStorage.set(l,g.extend(r,{checked:c})),o=T.find("iframe:first"),S.find("li:first").addClass("active"),o.attr("src",u).addClass("active"),g.site.frameEvents(o)):(g.site.menu.$instance.find("a").each(function(){var e=g(this);return e.attr("href")!==m||(d=g.trim(e.attr("title")||e.data("title")||e.text()),!1)}),f.buildTab({name:d,url:m}),f.enable(S.find(".active"))),g.components.init()}}),g(function(){i=g("html"),C=g("body"),x=g("#admui-siteMenubar"),k=g("#admui-navMenu"),w=g("#admui-navbarCollapse"),S=g("#admui-siteConTabs .con-tabs"),T=g("#admui-pageContent"),g.site.run()})}(window,document,jQuery);