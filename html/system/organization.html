
<!DOCTYPE html>
<html class="no-js css-menubar" lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>组织结构 - 系统设置 - Admui</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 移动设备 viewport -->
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui">
    <meta name="author" content="admui.com">
    <!-- 360浏览器默认使用Webkit内核 -->
    <meta name="renderer" content="webkit">
    <!-- 禁止搜索引擎抓取 -->
    <meta name="robots" content="nofollow">
    <!-- 禁止百度SiteAPP转码 -->
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <!-- Chrome浏览器添加桌面快捷方式（安卓） -->
    <link rel="icon" type="image/png" href="../../public/images/favicon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- Safari浏览器添加到主屏幕（IOS） -->
    <link rel="icon" sizes="192x192" href="../../public/images/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Admui">
    <!-- Win8标题栏及ICON图标 -->
    <link rel="apple-touch-icon-precomposed" href="../../public/images/apple-touch-icon.png">
    <meta name="msapplication-TileImage" content="../../public/images/app-icon72x72@2x.png">
    <meta name="msapplication-TileColor" content="#62a8ea">
    
    <!--[if lte IE 9]>
    <meta http-equiv="refresh" content="0; url='http://www.admui.com/ie'"/>
    <![endif]-->
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../public/themes/global/css/bootstrap.css">
    
    <!-- 字体图标 CSS -->
    <link rel="stylesheet" href="../../public/fonts/font-awesome/font-awesome.css">
    <link rel="stylesheet" href="../../public/fonts/web-icons/web-icons.css">
    
    <!-- Site CSS -->
    <link rel="stylesheet" href="../../public/themes/base/css/site.css" id="admui-siteStyle">
    
    <!-- 插件 CSS -->
    
    <link rel="stylesheet" href="../../public/vendor/jstree/jstree.css">
    <link rel="stylesheet" href="../../public/vendor/mCustomScrollbar/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="../../public/vendor/datatables-bootstrap/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="../../public/vendor/datatables-responsive/dataTables.responsive.css">
    <link rel="stylesheet" href="../../public/vendor/webui-popover/webui-popover.css">
    <link rel="stylesheet" href="../../public/vendor/select2/select2.css">
    
    <!-- Page CSS -->
    
    <link rel="stylesheet" href="../../public/css/system/organization.css">
    
    <!-- 插件 -->
    <script src="../../public/vendor/jquery/jquery.min.js"></script>
    <script src="../../public/vendor/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="../../public/vendor/lodash/lodash.min.js"></script>
</head>
<body class="page-aside-fixed page-aside-left" data-theme="base">

<div class="page page-full animation-fade page-organisation">
    <div class="page-aside">
        <div class="page-aside-switch">
            <i class="icon wb-chevron-left" aria-hidden="true"></i>
            <i class="icon wb-chevron-right" aria-hidden="true"></i>
        </div>
        <div class="page-aside-inner h-full">
            <section class="page-aside-section">
                <div class="page-aside-top px-20">
                    <div class="input-search">
                        <button type="submit" class="input-search-btn btn-icon">
                            <i class="icon wb-search" aria-hidden="true"></i>
                        </button>
                        <input type="text" class="form-control" id="departmentSearch" name="" placeholder="搜索部门">
                    </div>
                </div>
            </section>
            <section class="page-aside-section party-tree">
                <div class="h-full" data-plugin="mCustomScrollbar">
                    <!--TODO: 图标，block，排序，编辑-->
                    <div id="departmentJstree"></div>
                </div>
            </section>
            <section class="mx-20 mt-25 pt-15">
                <button type="button" class="btn btn-block py-5 btn-success add-dep" data-target="#departmentModal" data-toggle="modal">
                    <i class="icon wb-plus"></i> 增加部门
                </button>
            </section>
        </div>
    </div>
    <div class="page-main">
        <div class="page-header page-header-bordered mb-0">
            <div class="page-title" id="depMsg">
                <span>上海畅控（411人）</span>
            </div>
            <div class="page-header-actions">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="javascript:;" class="alter-dep">修改名称</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="javascript:;" class="add-child-dep" data-target="#departmentModal" data-toggle="modal">添加子部门</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="javascript:;" class="del-dep">删除</a>
                    </li>
                </ol>
            </div>
        </div>
        <div class="page-content p-0 bg-white">
            <div class="toolbar">
                <div class="row">
                    <div class="col-lg-4">
                        <button type="button" class="btn btn-outline btn-default float-left mr-10" id="addmember" data-target="#memberModal"
                            data-toggle="modal">
                            新增成员
                        </button>
                        <div class="float-left">
                            <div class="dropdown">
                                <button type="button" class="btn btn-outline btn-default dropdown-toggle selected-operation"
                                    data-toggle="dropdown" aria-expanded="false">
                                    <span>批量操作</span>
                                    <span class="caret"></span>
                                </button>
                                <div class="dropdown-menu" role="menu">
                                    <a class="dropdown-item modify-selected-item" href="javascript:;" role="menuitem">
                                        修改部门
                                    </a>
                                    <a class="dropdown-item disable-selected-item" href="javascript:;" role="menuitem">
                                        禁用成员
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8  hidden-md-down">
                        <div class="float-right">
                            <div class="float-left mr-10">
                                <div class="input-search w-150">
                                    <button type="submit" class="input-search-btn"><i class="icon wb-search" aria-hidden="true"></i></button>
                                    <input type="text" class="form-control" name="" id="searchMember" placeholder="搜索成员...">
                                </div>
                            </div>
                            <div class="float-left mr-10 hidden-lg-down">
                                <select class="form-control" id="queryRole">
                                    <option value="" selected>所有角色</option>
                                    <option value="">部门经理</option>
                                    <option value="">总经理</option>
                                    <option value="">主管</option>
                                    <option value="">成员</option>
                                    <option value="">管理员</option>
                                    <option value="">未分配角色</option>
                                </select>
                            </div>
                            <div class="float-left hidden-lg-down">
                                <select class="form-control" id="queryStatus" data-plugin="select2" data-minimum-results-for-search="Infinity">
                                    <option value="">状态</option>
                                    <option value="">启用账号</option>
                                    <option value="">停用账号</option>
                                    <option value="">未加入</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <table class="table org-table table-hover dataTable w-full border-top border-bottom text-nowrap" id="memberTable"
                data-column-defs='[{ "orderable": false, "targets": 0},{ "orderable": false, "targets": 1}]' data-order='[[1, "desc"]]'>
                <thead>
                    <tr>
                        <th width="20">
                            <div class="checkbox-custom checkbox-primary user-select-all">
                                <input type="checkbox" class="user-checkbox selectable-all">
                                <label></label>
                            </div>
                        </th>
                        <th>姓名</th>
                        <th>性别</th>
                        <th>部门</th>
                        <th>角色</th>
                        <th>手机</th>
                        <th>登录账号</th>
                        <th>邮箱</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th width="20">
                            <div class="checkbox-custom checkbox-primary user-select-all">
                                <input type="checkbox" class="user-checkbox selectable-all">
                                <label></label>
                            </div>
                        </th>
                        <th>姓名</th>
                        <th>性别</th>
                        <th>部门</th>
                        <th>角色</th>
                        <th>手机</th>
                        <th>登录账号</th>
                        <th>邮箱</th>
                        <th>操作</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="memberModal" aria-hidden="true" aria-labelledby="memberModal" role="dialog" tabindex="-1">
    <div class="modal-dialog">
    </div>
</div>
<script id="memberTpl" type="text/html">
    <form class="modal-content" id="memberForm">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
                <span aria-hidden="true">×</span>
            </button>
            <h4 class="modal-title"><% if (type === 'edit') { %> 编辑 <% }else{ %> 新增 <% } %>成员</h4>
        </div>
        <ul class="nav nav-tabs nav-tabs-line w-full" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" data-toggle="tab" href="#baseInfo" aria-controls="baseInfo" role="tab" aria-expanded="true">
                    成员信息
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" data-toggle="tab" href="#deptJob" aria-controls="jobInfo" role="tab" aria-expanded="false">
                    部门及角色
                </a>
            </li>
        </ul>
        <div class="modal-body">
            <div class="form form-horizontal mt-20">
                <div class="tab-content">
                    <div class="tab-pane active" id="baseInfo" role="tabpanel">
                        <div class="form-group row">
                            <input type="hidden" class="form-control" id="userId" name="id" value="<% id %>">
                            <label for="loginName" class="col-form-label col-md-3">登录账号：</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="loginName" name="userName" placeholder="请输入登录账号" value="<% userName %>">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="password" class="col-form-label col-md-3">初始密码：</label>
                            <div class="col-md-8">
                                <input type="password" class="form-control" id="password" name="password"
                                       value="" placeholder="成员登录后系统会提示修改该密码">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="name" class="col-form-label col-md-3">姓名：</label>
                            <div class="col-md-5">
                                <input type="text" class="form-control" id="name" name="name" value="<% name %>"
                                       placeholder="请输入姓名">
                            </div>
                            <div class="col-md-3">
                                <div class="radio-custom radio-default inline-block mr-15">
                                    <input type="radio" id="sexMale" name="sex" value="1" checked="checked">
                                    <label for="sexMale">男</label>
                                </div>
                                <div class="radio-custom radio-default inline-block">
                                    <% if (sex == 2) { %>
                                    <input type="radio" id="sexFemale" name="sex" value="2"
                                           checked="checked">
                                    <% } else { %>
                                    <input type="radio" id="sexFemale" name="sex" value="2">
                                    <% } %>
                                    <label for="sexFemale">女</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="mobile" class="col-form-label col-md-3">手机号：</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="mobile" name="mobile" value="<% mobile %>"
                                       placeholder="请输入手机号">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="email" class="col-form-label col-md-3">邮箱：</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="email" name="email" value="<% email %>"
                                       placeholder="请输入邮箱">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="telephone" class="col-form-label col-md-3">座机：</label>
                            <div class="col-md-5">
                                <input type="text" class="form-control" id="telephone" name="telephone" value="<% telephone %>"
                                       placeholder="请输入座机号码">
                            </div>
                            <div class="col-md-3">
                                <input type="text" class="form-control" id="phoneExt" name="phoneExt" value="<% phoneExt %>" placeholder="分机号">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="userCode" class="col-form-label col-md-3">工号：</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="userCode" name="jobNum"  value="<% jobNum %>"  placeholder="请输入工号">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="remarkMsg" class="col-form-label col-md-3">备注信息：</label>
                            <div class="col-md-8">
                                <textarea type="text" class="form-control" id="remarkMsg" name="remark"
                                          placeholder="请输入备注信息"><% remark %></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="deptJob" role="tabpanel">
                        <div class="form-group row">
                            <label for="department" class="col-form-label col-md-3">所属部门：</label>
                            <div class="col-md-8">
                                <div class="dropdown choose-dep">
                                    <input class="form-control" readonly="readonly" data-toggle="dropdown"
                                           aria-expanded="true" name="department" id="department" placeholder="请选择部门">
                                    <input type="hidden" name="orgIds" id="orgIds" value="<% orgIds %>">
                                    <div class="dropdown-menu dropdown-dep-tree" role="menu">
                                        <div class="choose-dep-tree"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="role" class="col-form-label col-md-3">角色分配：</label>
                            <div class="col-md-8">
                                <input type="hidden" name="roleIds" value="">
                                <select name="role" class="form-control" id="role"></select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="identity1" class="col-form-label col-md-3">身份类型：</label>
                            <div class="col-md-8">
                                <div class="radio-custom radio-default inline-block mr-15">
                                    <input type="radio" id="identity1" name="userType" value="2" checked="checked">
                                    <label for="identity1">普通成员</label>
                                </div>
                                <div class="radio-custom radio-default inline-block">
                                    <% if (userType === 1) { %>
                                    <input type="radio" id="identity2" name="userType" value="1" checked="checked">
                                    <% } else { %>
                                    <input type="radio" id="identity2" name="userType" value="1">
                                    <% } %>
                                    <label for="identity2">部门主管</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="executive" class="col-form-label col-md-3">高管模式：</label>
                            <div class="col-md-8">
                                <div class="checkbox-custom checkbox-default">
                                    <% if (executiveMode) { %>
                                    <input type="checkbox" id="executive" name="executiveMode" value="true" checked="checked">
                                    <% } else { %>
                                    <input type="checkbox" id="executive" name="executiveMode" value="true">
                                    <% } %>
                                    <label for="executive">开启</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary">确定</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        </div>
    </form>
</script>
<div class="modal fade" id="deptPicker" aria-hidden="true" aria-labelledby="deptPicker" role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title">选择部门</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-7">
                        <div class="input-search">
                            <button type="submit" class="input-search-btn btn-sm">
                                <i class="icon wb-search" aria-hidden="true"></i>
                            </button>
                            <input type="text" class="form-control form-control-sm" name="" placeholder="查找部门">
                        </div>
                        <div class="mt-10 h-250" data-plugin="mCustomScrollbar">
                            <div class="party-tree h-full" id="multipleEditDep"></div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="party-selected mt-3">
                            <p class="pl-10">已选择的部门：</p>
                            <div class="list-group list-group-full mt-20 h-250" data-plugin="mCustomScrollbar">
                                <div class="selected_dep"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="departmentModal" aria-hidden="true" aria-labelledby="departmentModal" role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
</div>
<script id="departmentTpl" type="text/html">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
            <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title"><% if (type === 'child') { %>添加子部门<% } else { %>新增部门<% } %></h4>
    </div>
    <div class="modal-body">
        <form class="form-horizontal p-30 pt-20" id="addDepartment">
            <div class="form-group row">
                <label class="col-form-label col-md-3 text-left">上级部门：</label>
                <div class="col-md-9">
                    <% if (type === 'child') { %>
                    <input class="form-control" readonly="readonly" aria-expanded="true" name="parentName"
                           value="<% depName %>">
                    <input type="hidden" name="parentId" value="<% depId %>" id="parentId">
                    <% } else { %>
                    <div class="dropdown choose-dep">
                        <input class="form-control" readonly="readonly" data-toggle="dropdown"
                               aria-expanded="true" name="parentName" placeholder="请选择上级部门" value="">
                        <input type="hidden" name="parentId" id="parentId" value="">
                        <div class="dropdown-menu dropdown-dep-tree" role="menu">
                            <div class="choose-dep-tree"></div>
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
            <div class="form-group row">
                <label for="orgName" class="col-form-label col-md-3 text-left">部门名称：</label>
                <div class="col-md-9">
                    <input type="text" class="form-control" id="orgName" name="orgName">
                </div>
            </div>
            <div class="form-group row">
                <label for="remark" class="col-form-label col-md-3 text-left">部门描述：</label>
                <div class="col-md-9">
                    <textarea class="form-control" id="remark" name="remark"></textarea>
                </div>
            </div>
            <div class="form-group row mt-25 mb-10">
                <div class="offset-md-3 col-md-9">
                    <button type="submit" class="btn btn-primary">确定</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                </div>
            </div>
        </form>
    </div>
</script>
<div class="modal fade" id="subDepModal" aria-hidden="true" aria-labelledby="subDepModal" role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title">添加子部门</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal p-30 pt-20">
                    <div class="form-group row">
                        <label class="col-form-label col-md-3 text-left">上级部门：</label>
                        <div class="col-md-9">
                            <input class="form-control" name="parentDep" readonly="readonly" aria-expanded="true" value="请选择上级部门">
                            <input type="hidden" name="parentDepId" value="">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="subDeptName" class="col-form-label col-md-3 text-left">部门名称：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="subDeptName">

                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="subDeptDescr" class="col-form-label col-md-3 text-left">部门描述：</label>
                        <div class="col-md-9">
                            <textarea class="form-control" id="subDeptDescr"></textarea>
                        </div>
                    </div>
                    <div class="form-group row mt-30 mb-10">
                        <div class="offset-md-3 col-md-9">
                            <button type="submit" class="btn btn-primary">确定</button>
                            <button type="button" class="btn btn-link" data-dismiss="modal">取消</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- 插件 -->
    <script src="../../public/vendor/matchheight/jquery.matchHeight.min.js"></script>
<script src="../../public/vendor/artTemplate/template-web.js"></script>
<script src="../../public/vendor/jstree/jstree.min.js"></script>
<script src="../../public/vendor/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="../../public/vendor/webui-popover/jquery.webui-popover.min.js"></script>
<script src="../../public/vendor/select2/select2.full.min.js"></script>
<script src="../../public/vendor/select2/i18n/zh-CN.js"></script>
<script src="../../public/vendor/datatables/jquery.dataTables.js"></script>
<script src="../../public/vendor/datatables-bootstrap/dataTables.bootstrap4.js"></script>
<script src="../../public/vendor/datatables-responsive/dataTables.responsive.min.js"></script>
<script src="../../public/vendor/jquery-validation/jquery.validate.min.js"></script>
<script src="../../public/vendor/jquery-validation/additional-methods.min.js"></script>
<script src="../../public/vendor/jquery-validation/localization/messages_zh.js"></script>

<script src="../../public/themes/global/js/plugins/selectable.js"></script>
    <script src="../../public/themes/base/js/app.js"></script>

<!-- Page JS -->
<script src="../../public/js/system/organization.js"></script>
</body>
</html>